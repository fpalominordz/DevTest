{"version":3,"sources":["../../../../src/graphql/actions/utils/uploader.js"],"names":["storeUpload","stream","resourceType","cloudinary","config","cloud_name","process","env","CLOUD_NAME","api_key","API_KEY","api_secret","API_SECRET","Promise","resolve","reject","buffer","v2","uploader","upload_stream","resource_type","err","result","pipe"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,YAAT,EAA0B;AAC5CC,yBAAWC,MAAX,CAAkB;AAChBC,IAAAA,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,UADR;AAEhBC,IAAAA,OAAO,EAAEH,OAAO,CAACC,GAAR,CAAYG,OAFL;AAGhBC,IAAAA,UAAU,EAAEL,OAAO,CAACC,GAAR,CAAYK;AAHR,GAAlB;;AAMA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAMC,MAAM,GAAGb,uBAAWc,EAAX,CAAcC,QAAd,CAAuBC,aAAvB,CACb;AAAEC,MAAAA,aAAa,EAAElB;AAAjB,KADa,EAEb,UAACmB,GAAD,EAAMC,MAAN,EAAiB;AACf,UAAID,GAAJ,EAASN,MAAM,CAACM,GAAD,CAAN;AACTP,MAAAA,OAAO,CAACQ,MAAD,CAAP;AACD,KALY,CAAf;;AAQArB,IAAAA,MAAM,CAACsB,IAAP,CAAYP,MAAZ;AACD,GAVM,CAAP;AAWD,CAlBD","sourcesContent":["import cloudinary from 'cloudinary';\r\n\r\nconst storeUpload = (stream, resourceType) => {\r\n  cloudinary.config({\r\n    cloud_name: process.env.CLOUD_NAME,\r\n    api_key: process.env.API_KEY,\r\n    api_secret: process.env.API_SECRET,\r\n  });\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const buffer = cloudinary.v2.uploader.upload_stream(\r\n      { resource_type: resourceType },\r\n      (err, result) => {\r\n        if (err) reject(err);\r\n        resolve(result);\r\n      }\r\n    );\r\n\r\n    stream.pipe(buffer);\r\n  })\r\n};\r\n\r\nexport {\r\n  storeUpload,\r\n}"],"file":"uploader.js"}